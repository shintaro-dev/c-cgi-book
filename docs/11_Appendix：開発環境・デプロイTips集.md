# 11_Appendix：開発環境・デプロイTips集 (Draft)

## A.1 環境全体像と構成方針

本書で使用する開発環境は、現実的な開発体験と、未来の導入給能を見据に、次の方針で構築します。

### ベースになるOS: Ubuntu 24.04 LTS
- **LTS(Long Term Support)版**のため，**5年間の保守期間**が予定されており，安定した運用が可能です。
- 多くのVPS業者（AWS Lightsail、ConoHa、さくらVPS など）で提供されており，**未来の本番移行を見据に入れた挙動も可能**です。
- 最新パッケージと安定性のバランスが良く，Apache 2.4系、MariaDB 10.11以降、ODBCドライバも簡単に利用できます。
- さらに，LinuxディストリビューションにはCentOS系やAlpine Linuxなど多種類存在しますが，**標準性、採用実績、未来的な運用性を総合的に考慮しUbuntu LTSを選択**しています。

### 開発環境の構成
- **VirtualBox**や**VMware**を使ったローカルVMで開発・演習を行い，ローカル環境で自由に破壊・復旧できる体験を優先します。
- 本番移行時は、VPS(例: Ubuntu 24.04)のミニマム構成で実用レベルでの運用を想定します。

### インフラ構成
- Webサーバ: **Apache HTTP Server**
- データベース: **MariaDB Server**
- ODBCドライバ: **MariaDB Connector/ODBC**
- CGI実行環境: **ApacheにおけるCGI実行構成の有効化**

### 定義するポリシー
- **最小限コンポーネントで、動作確認と開発に集中できる環境を作る。**
- **設定は可能な限り簡潔にし、理解を従える。**
- **DSNなし接続を基本とし、ODBC接続の自由度を高める。**

## A.2 OSの準備
- Ubuntu 24.04 LTS のインストール続き
- 基本パッケージのインストール
  - `build-essential`, `apache2`, `mariadb-server`, `unixODBC`, `gcc`, `gdb`

## A.3 Apache HTTP Serverの設定
- CGIモジュールの有効化
- CGI用ディレクトリの作成（パーミッション設定含む）
- 最小限のVirtualHost設定
- Hello World CGIで動作確認

## A.4 MariaDBのセットアップ
- MariaDBサーバーのインストールと起動
- ローカル接続用の設定簡略化
- 開発用ユーザ・テストDB作成

## A.5 ODBCドライバ・コネクターの設定
- MariaDB Connector/ODBCのインストール
- `odbcinst.ini`、`odbc.ini`設定（DSNなし接続基本）
- `isql` による接続テスト

## A.6 CGIプログラムのビルドとデプロイ
- gccを使ったビルド例
- Apache配置ディレクトリにデプロイ
- 必要なパーミッション設定
- 動作確認

## A.7 トラブルシューティング
- CGI 500エラーの原因パターン
- Apacheログ、ODBCログの確認方法
- 権限問題（パーミッション、パス問題）

## A.8 Appendix補足資料
- 参考リンク集
- 高度な環境(例:SSL化，Docker戦略)の簡単な紹介

---

# Tips
- コマンドは「ここにコピペ」と書きます
- ログ確認手順も、デフォルトパスまで絵文つきで入れます
- ソースコードや配置方法もすべて実践できる形で提示します

---

(次は、A.2 OSの準備の詳細文章へ進めます！)

